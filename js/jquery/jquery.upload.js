(function(a){function m(b){function c(a,b){e.push({name:a,value:b})}if(a.isArray(b))return b;var e=[];"object"===typeof b?a.each(b,function(b){a.isArray(this)?a.each(this,function(){c(b,this)}):c(b,a.isFunction(this)?this():this)}):"string"===typeof b&&a.each(b.split("&"),function(){var b=a.map(this.split("="),function(a){return decodeURIComponent(a.replace(/\+/g," "))});c(b[0],b[1])});return e}var n=0;a.fn.upload=function(b,c,e,j){var i=this,f,k,g;g="jquery_upload"+ ++n;var l=a('<iframe name="'+
g+'" style="position:absolute;top:-9999px" />').appendTo("body"),h='<form target="'+g+'" method="post" enctype="multipart/form-data" />';a.isFunction(c)&&(j=e,e=c,c={});k=a("input:checkbox",this);g=a("input:checked",this);h=i.wrapAll(h).parent("form").attr("action",b);k.removeAttr("checked");g.attr("checked",!0);f=(f=a.map(m(c),function(a){return'<input type="hidden" name="'+a.name+'" value="'+a.value+'"/>'}).join(""))?a(f).appendTo(h):null;h.submit(function(){l.load(function(){var b;var c=j,d;d=
a(this).contents().get(0);if(a.isXMLDoc(d)||d.XMLDocument)b=d.XMLDocument||d;else{d=a(d).find("body").html();switch(c){case "xml":c=d;window.DOMParser?d=(new DOMParser).parseFromString(c,"application/xml"):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async=!1,d.loadXML(c));break;case "json":d=window.eval("("+d+")")}b=d}c=a("input:checked",i);h.after(i).remove();k.removeAttr("checked");c.attr("checked",!0);f&&f.remove();setTimeout(function(){l.remove();"script"===j&&a.globalEval(b);e&&e.call(i,b)},0)})}).submit();
return this}})(jQuery);
