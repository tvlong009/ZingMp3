var base = $("#bizinsoha"); var html = '<p class="box-title"><a style="background:url(http://cafef3.vcmedia.vn/images/v3/bizinsohatitle.png);width:239px;height:24px;float:left;" target="_blank" href="http://cafebiz.vn?utm_source=Soha&amp;utm_medium=SohaEmbed&amp;utm_campaign=SohaBoxEmbed"></a><a style="background:url(http://cafef3.vcmedia.vn/images/v3/bizinsohalogo.png);width:73px;height:20px;float:right;margin-top:2px;margin-right:25px;" target="_blank" href="http://cafebiz.vn?utm_source=Soha&amp;utm_medium=SohaEmbed&amp;utm_campaign=SohaBoxEmbed"></a></p><div class="inner clearfix"><div class="inner clearfix"><ul class="inline clearfix" style="overflow: hidden;">';$.getJSON("http://cafebiz.vn/ajax/embedinsoha.ashx?jsoncallback=?", { format: "json" }).done(function(data) {bindData(data);});function bindData(data) {
    html += '<div class="mcgView" style="position:relative;display:block;overflow:hidden;width:960px;"><div class="mcgContainer" style="float:left;width:2880px;position:relative;">';
for (var i = 0; i < data.items.length; i++) { var news = data.items[i]; html += "<li><a href=\"" + news.link + "\" title=\"" + news.title_encode + "\" target=\"_blank\"><img src=\"" + news.img + "\"></a><a class=\"title\" href=\"" + news.link + "\" target=\"_blank\" title=\"" + news.title_encode + "\">" + news.title + "</a></li>"; } base.html(html + '</div></div></ul><div class="nav clearfix"><span class="prev" style="cursor: pointer;"></span><span class="next" style="cursor: pointer;"></span></div></div>'); $('#bizinsoha').show(); bindDataCallback(); } var bindDataCallback = function() { base.find('li').addClass("k14embed-item"); var k14CurrentIndex = 1; var k14NumberOfSlide = Math.ceil(base.find('li').length / 4, 0); base.mcgSlider({ slideItemElement: ".k14embed-item", preButton: $("#bizinsoha .nav .prev"), nextButton: $("#bizinsoha .nav .next"), numberOfVisibleSlides: 4, auto: false, duration: 7000, onSlideNext: function() { k14CurrentIndex = k14CurrentIndex >= k14NumberOfSlide ? 1 : k14CurrentIndex + 1; $(".k14embed-nav span").text(k14CurrentIndex + "/" + k14NumberOfSlide); }, onSlideBack: function() { k14CurrentIndex = k14CurrentIndex <= 1 ? k14NumberOfSlide : k14CurrentIndex - 1; $(".k14embed-nav span").text(k14CurrentIndex + "/" + k14NumberOfSlide); } }); $("#bizinsoha ul.inline .title").each(function() { $(this).trimContent($(this), 40); }); };$("#bizinsoha .nav .prev, #bizinsoha .nav .next").each(function() { $(this).mousedown(function() { $(this).addClass("active"); }); $(this).mouseup(function() { $(this).removeClass("active"); }); });